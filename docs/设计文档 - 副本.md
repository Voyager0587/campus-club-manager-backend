# 校园社团管理系统设计文档

---

# 一、概要设计文档

## 1. 项目技术选型说明

### 1.1 后端技术栈

| 技术 | 版本 | 说明 | 选型理由 |
|------|------|------|----------|
| **Java** | 17 | 编程语言 | LTS版本、性能优化、现代语法特性 |
| **Maven** | 3.8+ | 构建工具 | 依赖管理成熟、插件生态丰富 |
| **Spring Boot** | 3.4.4 | 应用框架 | 简化配置、快速开发、生态完善 |
| **MyBatis Plus** | 3.5.9 | ORM框架 | 强大的CRUD操作、代码生成、分页插件 |
| **Sa-Token** | 1.44.0 | 权限认证框架 | 轻量级、功能完善、易于集成RBAC |
| **MySQL** | 8.0+ | 关系型数据库 | 成熟稳定、支持事务、适合结构化数据 |
| **HikariCP** | 5.0+ | 数据库连接池 | 性能最优、Spring Boot默认集成 |
| **Logback** | 1.4+ | 日志框架 | SLF4J实现、Spring Boot默认、配置灵活 |
| **Lombok** | 1.18.30 | 代码简化工具 | 减少样板代码、提高开发效率 |
| **Validation** | 3.0+ | 参数校验 | JSR-303标准、声明式校验 |
| **SpringDoc OpenAPI** | 2.3+ | API文档 | 自动生成Swagger文档、支持在线测试 |
| **Aliyun OSS** | 3.17+ | 对象存储 | 文件上传、CDN加速 |

### 1.2 核心框架选型对比

#### Spring Boot vs 其他框架

| 对比项 | Spring Boot | Spring MVC | Quarkus | Micronaut |
|--------|-------------|------------|---------|-----------|
| **配置复杂度** | 自动配置，零XML | 需要大量XML配置 | 注解配置 | 注解配置 |
| **启动速度** | 中等（2-5秒） | 慢（5-10秒） | 快（<1秒） | 快（<1秒） |
| **生态成熟度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ |
| **学习曲线** | 平缓 | 陡峭 | 中等 | 中等 |
| **社区支持** | 非常活跃 | 活跃 | 成长中 | 成长中 |
| **企业应用** | 广泛使用 | 传统项目 | 云原生场景 | 微服务场景 |

**选择Spring Boot的原因**：
- 校园项目对启动速度要求不高，更看重开发效率
- 生态成熟，第三方库集成简单（Sa-Token、MyBatis Plus等）
- 团队熟悉度高，学习成本低
- 社区资源丰富，问题解决快

#### MyBatis Plus vs 其他ORM

| 对比项 | MyBatis Plus | MyBatis | JPA/Hibernate | jOOQ |
|--------|--------------|---------|---------------|------|
| **SQL控制** | 灵活可控 | 完全可控 | 自动生成 | 类型安全SQL |
| **代码生成** | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| **学习成本** | 低 | 中 | 高 | 中 |
| **复杂查询** | 支持良好 | 最灵活 | 较复杂 | 优秀 |
| **性能优化** | 易于优化 | 易于优化 | 需要调优 | 优秀 |

**选择MyBatis Plus的原因**：
- 继承MyBatis的SQL可控性，避免JPA的N+1查询问题
- 内置CRUD方法，减少80%重复代码
- 代码生成器快速搭建项目骨架
- 分页插件开箱即用，无需手写分页逻辑

#### Sa-Token vs 其他认证框架

| 对比项 | Sa-Token | Spring Security | Shiro | JWT |
|--------|----------|-----------------|-------|-----|
| **上手难度** | ⭐简单 | ⭐⭐⭐⭐复杂 | ⭐⭐中等 | ⭐⭐中等 |
| **功能完整性** | 认证+授权+SSO | 企业级全功能 | 认证+授权 | 仅token |
| **配置复杂度** | 极简 | 复杂 | 中等 | 需自行实现 |
| **文档友好度** | 中文文档详细 | 英文为主 | 中文资源多 | 需自行设计 |
| **适用场景** | 中小型项目 | 大型企业应用 | 传统Web应用 | 微服务 |

**选择Sa-Token的原因**：
- 校园项目权限模型简单（用户、社团管理员、系统管理员）
- 注解式鉴权，代码简洁易读（`@SaCheckRole("admin")`）
- 中文文档完善，团队学习成本低
- 轻量级，不需要Spring Security的复杂配置

### 1.3 技术选型优势

- **开发效率高**：Spring Boot自动配置 + MyBatis Plus代码生成
- **安全性强**：Sa-Token提供完善的认证授权机制
- **易于维护**：分层架构清晰、代码规范统一
- **扩展性好**：支持水平扩展、模块化设计
- **性能优异**：MyBatis Plus优化查询、HikariCP高性能连接池

## 2. 项目架构图

### 2.1 MVC分层架构

本项目采用经典的MVC三层架构模式，分为以下层次：

**架构层次说明：**

1. **Controller层（控制层）**
   - 职责：接收HTTP请求，参数校验，调用Service层，返回响应
   - 技术：Spring MVC、@RestController、@RequestMapping
   - 特点：薄控制器，只负责请求转发和响应封装

2. **Service层（业务逻辑层）**
   - 职责：核心业务逻辑处理，事务管理，权限验证
   - 技术：@Service、@Transactional
   - 特点：业务逻辑集中，可复用

3. **Mapper层（数据访问层）**
   - 职责：数据库CRUD操作，SQL执行
   - 技术：MyBatis Plus、BaseMapper
   - 特点：继承BaseMapper，自动生成常用方法

4. **Entity层（实体层）**
   - 职责：数据库表映射，数据传输
   - 技术：@TableName、@TableId
   - 特点：与数据库表一一对应

5. **VO/DTO层（数据传输对象）**
   - 职责：前后端数据交互，数据封装
   - 技术：Java Bean、@Data
   - 特点：隔离内部实体，保护敏感信息

### 2.2 系统架构图

![whiteboard_exported_image (2)](assets/whiteboard_exported_image (2).png)



### 2.3 MVC请求处理流程

![image-20251127112652762](assets/image-20251127112652762.png)



## 3. 数据库设计

### 3.1 数据库ER图

![image-20251127112840775](assets/image-20251127112840775.png)

### 3.2 数据库表设计

#### 3.2.1 用户表 (user)

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 索引 | 说明 |
|--------|------|------|----------|--------|------|------|
| id | bigint | - | NO | AUTO_INCREMENT | PK | 用户ID，主键 |
| username | varchar | 50 | NO | - | UK | 用户名，唯一 |
| password | varchar | 255 | NO | - | - | 密码（加密存储） |
| real_name | varchar | 50 | NO | - | - | 真实姓名 |
| student_id | varchar | 50 | NO | - | UK | 学号，唯一 |
| email | varchar | 100 | NO | - | UK | 邮箱，唯一 |
| phone | varchar | 20 | YES | NULL | - | 手机号 |
| avatar | varchar | 500 | YES | NULL | - | 头像URL |
| role | varchar | 20 | NO | 'user' | INDEX | 用户角色：user-普通用户, club_admin-社团管理员, system_admin-系统管理员 |
| status | tinyint | - | NO | 1 | INDEX | 账户状态：0-禁用，1-正常 |
| create_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 创建时间 |
| update_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 更新时间（自动更新） |
| is_deleted | tinyint | - | NO | 0 | - | 逻辑删除标记：0-未删除，1-已删除 |

#### 3.2.2 社团表 (club)

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 索引 | 说明 |
|--------|------|------|----------|--------|------|------|
| id | bigint | - | NO | AUTO_INCREMENT | PK | 社团ID，主键 |
| name | varchar | 100 | NO | - | UK | 社团名称，唯一（配合is_deleted） |
| description | text | - | YES | NULL | - | 社团简介 |
| logo | varchar | 500 | YES | NULL | - | 社团图标URL |
| status | varchar | 20 | NO | 'normal' | INDEX | 社团状态：pending-审核中, normal-正常, disabled-已禁用 |
| create_user | bigint | - | NO | - | INDEX, FK | 创建者用户ID，外键关联user表 |
| create_time | datetime | - | NO | CURRENT_TIMESTAMP | INDEX | 创建时间 |
| update_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 更新时间（自动更新） |
| is_deleted | tinyint | - | NO | 0 | - | 逻辑删除标记：0-未删除，1-已删除 |

**外键约束：**
- `fk_club_create_user`: create_user → user(id)，级联限制删除

#### 3.2.3 社团成员表 (club_member)

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 索引 | 说明 |
|--------|------|------|----------|--------|------|------|
| id | bigint | - | NO | AUTO_INCREMENT | PK | 成员关系ID，主键 |
| club_id | bigint | - | NO | - | UK, FK | 社团ID，外键关联club表 |
| user_id | bigint | - | NO | - | UK, INDEX, FK | 用户ID，外键关联user表 |
| role | varchar | 20 | NO | 'member' | INDEX | 成员角色：member-普通成员, leader-社长/负责人 |
| join_time | datetime | - | YES | NULL | INDEX | 加入时间 |
| memo | varchar | 500 | YES | NULL | - | 备注信息 |
| create_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 创建时间 |
| update_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 更新时间（自动更新） |
| is_deleted | tinyint | - | NO | 0 | - | 逻辑删除标记：0-未删除，1-已删除 |

**唯一索引：** `uk_club_user(club_id, user_id, is_deleted)` - 防止重复加入

**外键约束：**
- `fk_club_member_club`: club_id → club(id)，级联删除
- `fk_club_member_user`: user_id → user(id)，级联删除

#### 3.2.4 社团申请表 (club_application)

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 索引 | 说明 |
|--------|------|------|----------|--------|------|------|
| id | bigint | - | NO | AUTO_INCREMENT | PK | 申请ID，主键 |
| club_id | bigint | - | NO | - | INDEX, FK | 社团ID，外键关联club表 |
| user_id | bigint | - | NO | - | INDEX, FK | 申请用户ID，外键关联user表 |
| status | varchar | 20 | NO | 'pending' | INDEX | 申请状态：pending-待审核, approved-已通过, rejected-已拒绝 |
| reason | text | - | YES | NULL | - | 申请理由 |
| review_note | text | - | YES | NULL | - | 审核备注（管理员填写） |
| review_time | datetime | - | YES | NULL | - | 审核时间 |
| reviewer_id | bigint | - | YES | NULL | INDEX, FK | 审核人ID，外键关联user表 |
| create_time | datetime | - | NO | CURRENT_TIMESTAMP | INDEX | 创建时间 |
| update_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 更新时间（自动更新） |
| is_deleted | tinyint | - | NO | 0 | - | 逻辑删除标记：0-未删除，1-已删除 |

**外键约束：**
- `fk_club_application_club`: club_id → club(id)，级联删除
- `fk_club_application_user`: user_id → user(id)，级联删除
- `fk_club_application_reviewer`: reviewer_id → user(id)，删除时设为NULL

#### 3.2.5 活动表 (activity)

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 索引 | 说明 |
|--------|------|------|----------|--------|------|------|
| id | bigint | - | NO | AUTO_INCREMENT | PK | 活动ID，主键 |
| club_id | bigint | - | NO | - | INDEX, FK | 所属社团ID，外键关联club表 |
| title | varchar | 200 | NO | - | - | 活动标题 |
| content | text | - | NO | - | - | 活动内容详情 |
| cover | varchar | 500 | YES | NULL | - | 活动封面图URL |
| location | varchar | 200 | YES | NULL | - | 活动地点 |
| start_time | datetime | - | NO | - | INDEX | 活动开始时间 |
| end_time | datetime | - | NO | - | INDEX | 活动结束时间 |
| signup_start_time | datetime | - | YES | NULL | - | 报名开始时间 |
| signup_end_time | datetime | - | YES | NULL | - | 报名截止时间 |
| status | varchar | 20 | NO | 'draft' | INDEX | 活动状态：draft-草稿, pending-审核中, published-已发布, cancelled-已取消, completed-已完成 |
| max_members | int | - | YES | NULL | - | 最大报名人数（NULL表示不限制） |
| current_members | int | - | NO | 0 | - | 当前报名人数（冗余字段，提高查询性能） |
| create_user | bigint | - | NO | - | INDEX, FK | 创建者用户ID，外键关联user表 |
| create_time | datetime | - | NO | CURRENT_TIMESTAMP | INDEX | 创建时间 |
| update_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 更新时间（自动更新） |
| is_deleted | tinyint | - | NO | 0 | - | 逻辑删除标记：0-未删除，1-已删除 |

**外键约束：**
- `fk_activity_club`: club_id → club(id)，级联删除
- `fk_activity_create_user`: create_user → user(id)，限制删除

**检查约束：**
- `chk_activity_time`: end_time >= start_time，确保结束时间不早于开始时间

#### 3.2.6 活动报名表 (activity_signup)

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 索引 | 说明 |
|--------|------|------|----------|--------|------|------|
| id | bigint | - | NO | AUTO_INCREMENT | PK | 报名记录ID，主键 |
| activity_id | bigint | - | NO | - | UK, FK | 活动ID，外键关联activity表 |
| user_id | bigint | - | NO | - | UK, INDEX, FK | 用户ID，外键关联user表 |
| status | varchar | 20 | NO | 'registered' | INDEX | 报名状态：registered-已报名, cancelled-已取消, checked_in-已签到, absent-缺席 |
| signup_time | datetime | - | NO | CURRENT_TIMESTAMP | INDEX | 报名时间 |
| checkin_time | datetime | - | YES | NULL | - | 签到时间 |
| remark | varchar | 500 | YES | NULL | - | 备注信息 |
| create_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 创建时间 |
| update_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 更新时间（自动更新） |
| is_deleted | tinyint | - | NO | 0 | - | 逻辑删除标记：0-未删除，1-已删除 |

**唯一索引：** `uk_activity_user(activity_id, user_id, is_deleted)` - 防止重复报名

**外键约束：**
- `fk_activity_signup_activity`: activity_id → activity(id)，级联删除
- `fk_activity_signup_user`: user_id → user(id)，级联删除

#### 3.2.7 公告表 (announcement)

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 索引 | 说明 |
|--------|------|------|----------|--------|------|------|
| id | bigint | - | NO | AUTO_INCREMENT | PK | 公告ID，主键 |
| title | varchar | 200 | NO | - | - | 公告标题 |
| content | text | - | NO | - | - | 公告内容 |
| type | varchar | 20 | NO | 'system' | INDEX | 公告类型：system-系统公告, club-社团公告, activity-活动公告 |
| related_id | bigint | - | YES | NULL | INDEX | 关联ID（社团ID或活动ID，根据type类型关联） |
| priority | tinyint | - | NO | 0 | INDEX | 优先级：0-普通, 1-重要, 2-紧急 |
| status | varchar | 20 | NO | 'published' | INDEX | 状态：draft-草稿, published-已发布, archived-已归档 |
| create_user_id | bigint | - | NO | - | INDEX, FK | 创建者用户ID，外键关联user表 |
| publish_time | datetime | - | YES | NULL | INDEX | 发布时间 |
| expire_time | datetime | - | YES | NULL | - | 过期时间 |
| create_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 创建时间 |
| update_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 更新时间（自动更新） |
| is_deleted | tinyint | - | NO | 0 | - | 逻辑删除标记：0-未删除，1-已删除 |

**外键约束：**
- `fk_announcement_create_user`: create_user_id → user(id)，限制删除

#### 3.2.8 通知表 (notification)

| 字段名 | 类型 | 长度 | 允许NULL | 默认值 | 索引 | 说明 |
|--------|------|------|----------|--------|------|------|
| id | bigint | - | NO | AUTO_INCREMENT | PK | 通知ID，主键 |
| user_id | bigint | - | NO | - | INDEX, FK | 接收用户ID，外键关联user表 |
| title | varchar | 200 | NO | - | - | 通知标题 |
| content | text | - | NO | - | - | 通知内容 |
| type | varchar | 20 | NO | - | INDEX | 通知类型：system-系统通知, audit-审核消息, activity-活动提醒, club-社团通知 |
| related_type | varchar | 20 | YES | NULL | INDEX | 关联类型：club, activity, announcement等 |
| related_id | bigint | - | YES | NULL | INDEX | 关联ID |
| read_flag | tinyint | - | NO | 0 | INDEX | 阅读标记：0-未读, 1-已读 |
| read_time | datetime | - | YES | NULL | - | 阅读时间 |
| create_time | datetime | - | NO | CURRENT_TIMESTAMP | INDEX | 创建时间 |
| update_time | datetime | - | NO | CURRENT_TIMESTAMP | - | 更新时间（自动更新） |
| is_deleted | tinyint | - | NO | 0 | - | 逻辑删除标记：0-未删除，1-已删除 |

**复合索引：** `idx_related(related_type, related_id)` - 优化关联查询

**外键约束：**
- `fk_notification_user`: user_id → user(id)，级联删除

### 3.3 数据库设计说明

#### 3.3.1 设计原则

1. **逻辑删除**：所有表采用逻辑删除（is_deleted字段），保留历史数据便于审计和恢复
2. **时间戳**：统一使用create_time和update_time字段，update_time自动更新
3. **外键约束**：合理使用外键保证数据完整性，根据业务需求选择级联策略
4. **索引优化**：为常用查询字段建立索引，提高查询性能
5. **字符集**：使用utf8mb4字符集，支持emoji等特殊字符
6. **命名规范**：表名、字段名使用小写下划线命名法

#### 3.3.2 性能优化设计

1. **冗余字段**：activity表的current_members字段冗余存储，减少关联查询
2. **复合索引**：为常见组合查询建立复合索引（如uk_club_user、idx_related）
3. **分页查询**：通过create_time等时间字段索引支持高效分页
4. **状态索引**：为status等枚举字段建立索引，优化状态筛选查询

#### 3.3.3 数据完整性保证

1. **唯一约束**：用户名、学号、邮箱等关键字段设置唯一索引
2. **检查约束**：活动表的时间检查约束确保时间逻辑正确
3. **外键级联**：合理设置级联删除和限制删除，防止数据孤岛
4. **默认值**：为状态字段设置合理默认值，简化业务逻辑

## 4. 系统部署架构

### 🌟🌟🌟4.1 部署架构图

> 部署图说明：清晰表达前后端部署位置（本地、云服务器或混合）

nano🍌pro生成

### 4.2 部署环境说明

| 环境 | 配置 | 说明 |
|------|------|------|
| **开发环境** | 单机部署 | 本地开发测试 |
| **测试环境** | 2台应用服务器 + 1台数据库 | 功能测试、性能测试 |
| **生产环境** | 3台应用服务器 + MySQL主从 + Redis集群 | 高可用部署 |

### 4.3 部署位置说明

**前后端部署位置：**
- **前端应用**：部署在Nginx服务器，提供静态资源服务
- **后端应用**：部署在应用服务器集群（云服务器），通过Nginx反向代理访问
- **数据库**：独立数据库服务器（云服务器），主从架构保证高可用
- **文件存储**：阿里云OSS云存储服务
- **缓存服务**：Redis集群（云服务器）

---

# 二、详细设计文档

## 1. 系统类图

> 系统类图必须与实际代码类名完全一致，使用英文命名
>
> 类图涵盖控制器、服务层、DAO层及实体类，确保可指导编码

![image-20251127114013096](assets/image-20251127114013096.png)

## 2. 接口设计

### 2.1 用户管理模块

**控制器**: `UserController`  
**基础路径**: `/user`  
**功能描述**: 提供用户注册、登录、信息查询和更新等基础功能

#### 2.1.1 用户注册
- **接口路径**: `POST /user/register`
- **权限要求**: 公开接口（无需登录）
- **功能说明**: 用户自助注册账号
- **请求体**: `RegisterRequest`
- **响应**: 注册成功提示


#### 2.1.2 用户登录
- **接口路径**: `POST /user/login`
- **权限要求**: 公开接口（无需登录）
- **功能说明**: 用户登录获取Token
- **请求体**: `LoginRequest`
- **响应**: `LoginResponse`（包含Token和用户信息）

#### 2.1.3 获取当前用户信息
- **接口路径**: `GET /user/info`
- **权限要求**: 需要登录（`@SaCheckRole("user")`）
- **功能说明**: 获取当前登录用户的详细信息
- **响应**: `UserInfoVO`

#### 2.1.4 更新用户信息
- **接口路径**: `POST /user/update`
- **权限要求**: 需要登录（`@SaCheckRole("user")`）
- **功能说明**: 更新当前用户的个人资料
- **请求体**: `UpdateUserRequest`
- **响应**: 更新成功提示

---

### 2.2 社团管理模块

#### 2.2.1 用户端接口

**控制器**: `ClubController`  
**基础路径**: `/club`  
**功能描述**: 提供社团浏览、查询、申请加入等用户端功能

##### 2.2.1.1 分页查询社团列表
- **接口路径**: `GET /club/list`
- **权限要求**: 公开接口（无需登录）
- **功能说明**: 支持关键词搜索的分页社团列表查询
- **请求参数**:
  - `pageNum` (Integer, 默认值: 1): 页码
  - `pageSize` (Integer, 默认值: 10): 每页数量
  - `keyword` (String, 可选): 搜索关键词
- **响应**: `Page<ClubVO>`

##### 2.2.1.2 查询社团详情
- **接口路径**: `GET /club/{id}`
- **权限要求**: 公开接口（无需登录）
- **功能说明**: 查看社团详细信息
- **路径参数**: `id` (Long): 社团ID
- **响应**: `ClubDetailVO`

##### 2.2.1.3 查询我加入的社团
- **接口路径**: `GET /club/my`
- **权限要求**: 需要登录（`@SaCheckRole("user")`）
- **功能说明**: 查看当前用户已加入的社团列表
- **响应**: `List<ClubVO>`

##### 2.2.1.4 申请加入社团
- **接口路径**: `POST /club/apply`
- **权限要求**: 需要登录（`@SaCheckRole("user")`）
- **功能说明**: 提交加入社团的申请
- **请求体**: `ApplyJoinClubRequest`
- **响应**: 申请提交成功提示

##### 2.2.1.5 查询社团成员列表
- **接口路径**: `GET /club/{id}/members`
- **权限要求**: 公开接口（无需登录）
- **功能说明**: 查看社团的成员列表
- **路径参数**: `id` (Long): 社团ID
- **请求参数**:
  - `pageNum` (Integer, 默认值: 1): 页码
  - `pageSize` (Integer, 默认值: 10): 每页数量
- **响应**: `Page<ClubMemberVO>`

##### 2.2.1.6 查询我的申请记录
- **接口路径**: `GET /club/my/applications`
- **权限要求**: 需要登录（`@SaCheckRole("user")`）
- **功能说明**: 查看当前用户的所有社团申请记录
- **响应**: `List<ClubApplicationVO>`

#### 2.2.2 社团负责人接口

**控制器**: `ClubManagementController`  
**基础路径**: `/club/management`  
**功能描述**: 提供社团负责人管理社团的相关功能

##### 2.2.2.1 查询待审核申请列表
- **接口路径**: `GET /club/management/{clubId}/applications/pending`
- **权限要求**: 需要登录（`@SaCheckLogin`），且需要社团负责人权限
- **功能说明**: 查看自己管理的社团的待审核申请
- **路径参数**: `clubId` (Long): 社团ID
- **请求参数**:
  - `pageNum` (Integer, 默认值: 1): 页码
  - `pageSize` (Integer, 默认值: 10): 每页数量
- **响应**: `Page<ClubApplicationVO>`

##### 2.2.2.2 审核社团申请
- **接口路径**: `POST /club/management/{clubId}/applications/review`
- **权限要求**: 需要登录（`@SaCheckLogin`），且需要社团负责人权限
- **功能说明**: 审核通过或拒绝用户的加入申请
- **路径参数**: `clubId` (Long): 社团ID
- **请求体**: `ReviewApplicationRequest`
- **响应**: 审核完成提示

##### 2.2.2.3 更新社团信息
- **接口路径**: `PUT /club/management/{clubId}`
- **权限要求**: 需要登录（`@SaCheckLogin`），且需要社团负责人权限
- **功能说明**: 修改自己管理的社团的基本信息
- **路径参数**: `clubId` (Long): 社团ID
- **请求体**: `UpdateClubRequest`
- **响应**: 更新成功提示

#### 2.2.3 系统管理员接口

**控制器**: `AdminClubController`  
**基础路径**: `/admin/club`  
**功能描述**: 提供系统管理员对社团的创建、审核、管理等完整功能

##### 2.2.3.1 创建社团
- **接口路径**: `POST /admin/club/create`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 创建新的社团
- **请求体**: `CreateClubRequest`
- **响应**: 社团创建成功提示

##### 2.2.3.2 更新社团信息
- **接口路径**: `PUT /admin/club/update`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 修改社团基本信息
- **请求体**: `UpdateClubRequest`
- **响应**: 更新成功提示

##### 2.2.3.3 删除社团
- **接口路径**: `DELETE /admin/club/{id}`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 删除社团及相关数据
- **路径参数**: `id` (Long): 社团ID
- **响应**: 删除成功提示

##### 2.2.3.4 查询待审核申请列表
- **接口路径**: `GET /admin/club/applications/pending`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 查看所有待审核的社团加入申请
- **请求参数**:
  - `pageNum` (Integer, 默认值: 1): 页码
  - `pageSize` (Integer, 默认值: 10): 每页数量
- **响应**: `Page<ClubApplicationVO>`

##### 2.2.3.5 审核社团申请
- **接口路径**: `POST /admin/club/applications/review`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 审核通过或拒绝用户的加入申请
- **请求体**: `ReviewApplicationRequest`
- **响应**: 审核完成提示

##### 2.2.3.6 设置社团负责人
- **接口路径**: `POST /admin/club/{clubId}/leader/{userId}`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 将指定用户设置为社团负责人
- **路径参数**:
  - `clubId` (Long): 社团ID
  - `userId` (Long): 用户ID
- **响应**: 设置成功提示

##### 2.2.3.7 取消社团负责人
- **接口路径**: `DELETE /admin/club/{clubId}/leader/{userId}`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 取消指定用户的社团负责人身份
- **路径参数**:
  - `clubId` (Long): 社团ID
  - `userId` (Long): 用户ID
- **响应**: 取消成功提示

---

### 2.3 活动管理模块

#### 2.3.1 学生端接口

**控制器**: `ActivityController`  
**基础路径**: `/activity`  
**功能描述**: 提供活动浏览、报名、取消报名等学生端功能

##### 2.3.1.1 浏览活动列表
- **接口路径**: `GET /activity/list`
- **权限要求**: 公开接口（无需登录）
- **功能说明**: 支持关键词搜索和社团筛选的活动列表查询
- **请求参数**:
  - `pageNum` (Integer, 默认值: 1): 页码
  - `pageSize` (Integer, 默认值: 10): 每页数量
  - `keyword` (String, 可选): 搜索关键词
  - `clubId` (Long, 可选): 社团ID
- **响应**: `Page<ActivityVO>`

##### 2.3.1.2 查看活动详情
- **接口路径**: `GET /activity/{id}`
- **权限要求**: 公开接口（无需登录）
- **功能说明**: 查看活动详细信息
- **路径参数**: `id` (Long): 活动ID
- **响应**: `ActivityDetailVO`

##### 2.3.1.3 报名活动
- **接口路径**: `POST /activity/{id}/signup`
- **权限要求**: 需要登录（`@SaCheckRole("user")`）
- **功能说明**: 用户报名参加活动
- **路径参数**: `id` (Long): 活动ID
- **响应**: 报名成功提示

##### 2.3.1.4 取消报名
- **接口路径**: `DELETE /activity/{id}/signup`
- **权限要求**: 需要登录（`@SaCheckRole("user")`）
- **功能说明**: 用户取消活动报名
- **路径参数**: `id` (Long): 活动ID
- **响应**: 取消报名成功提示

##### 2.3.1.5 查看我的报名记录
- **接口路径**: `GET /activity/my-signups`
- **权限要求**: 需要登录（`@SaCheckRole("user")`）
- **功能说明**: 查看当前用户的所有活动报名记录
- **响应**: `List<ActivitySignupVO>`

#### 2.3.2 社团管理员接口

**控制器**: `ClubActivityController`  
**基础路径**: `/club-admin/activity`  
**功能描述**: 提供社团负责人创建、管理活动等功能

##### 2.3.2.1 创建活动
- **接口路径**: `POST /club-admin/activity/create`
- **权限要求**: 需要登录（`@SaCheckRole("user")`），具体权限在Service层验证
- **功能说明**: 社团负责人创建活动，创建后等待系统管理员审核
- **请求体**: `CreateActivityRequest`
- **响应**: 活动创建成功提示（提示等待审核）

##### 2.3.2.2 更新活动
- **接口路径**: `PUT /club-admin/activity/{id}`
- **权限要求**: 需要登录（`@SaCheckRole("user")`），具体权限在Service层验证
- **功能说明**: 社团负责人更新活动信息
- **路径参数**: `id` (Long): 活动ID
- **请求体**: `UpdateActivityRequest`
- **响应**: 活动更新成功提示

##### 2.3.2.3 取消活动
- **接口路径**: `PUT /club-admin/activity/{id}/cancel`
- **权限要求**: 需要登录（`@SaCheckRole("user")`），具体权限在Service层验证
- **功能说明**: 社团负责人取消活动
- **路径参数**: `id` (Long): 活动ID
- **响应**: 活动已取消提示

##### 2.3.2.4 查看活动报名列表
- **接口路径**: `GET /club-admin/activity/{id}/signups`
- **权限要求**: 需要登录（`@SaCheckRole("user")`），具体权限在Service层验证
- **功能说明**: 社团负责人查看活动的所有报名人员
- **路径参数**: `id` (Long): 活动ID
- **请求参数**:
  - `pageNum` (Integer, 默认值: 1): 页码
  - `pageSize` (Integer, 默认值: 10): 每页数量
- **响应**: `Page<ActivitySignupVO>`

##### 2.3.2.5 活动签到/标记缺席
- **接口路径**: `POST /club-admin/activity/{id}/checkin`
- **权限要求**: 需要登录（`@SaCheckRole("user")`），具体权限在Service层验证
- **功能说明**: 社团负责人为报名用户签到或标记缺席
- **路径参数**: `id` (Long): 活动ID
- **请求体**: `CheckinRequest`
- **响应**: 操作成功提示

#### 2.3.3 系统管理员接口

**控制器**: `AdminActivityController`  
**基础路径**: `/admin/activity`  
**功能描述**: 提供系统管理员审核、管理所有活动的功能

##### 2.3.3.1 查看所有活动
- **接口路径**: `GET /admin/activity/list`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 系统管理员查看所有活动，支持关键词和状态筛选
- **请求参数**:
  - `pageNum` (Integer, 默认值: 1): 页码
  - `pageSize` (Integer, 默认值: 10): 每页数量
  - `keyword` (String, 可选): 搜索关键词
  - `status` (String, 可选): 活动状态
- **响应**: `Page<ActivityVO>`

##### 2.3.3.2 审核活动
- **接口路径**: `PUT /admin/activity/{id}/review`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 系统管理员审核活动（通过/拒绝）
- **路径参数**: `id` (Long): 活动ID
- **请求体**: `ReviewActivityRequest`
- **响应**: 审核完成提示

##### 2.3.3.3 删除活动
- **接口路径**: `DELETE /admin/activity/{id}`
- **权限要求**: 需要系统管理员角色（`@SaCheckRole("system_admin")`）
- **功能说明**: 系统管理员删除活动
- **路径参数**: `id` (Long): 活动ID
- **响应**: 删除成功提示

---

## 3. 重要功能的顺序图、协作图、状态图

### 3.1 顺序图

#### 3.1.1 用户登录功能 - 顺序图

![121212](assets/121212.png)

#### 3.1.2 用户注册功能 - 顺序图

![121212121Em-](assets/121212121Em-.png)

#### 3.1.3 申请加入社团功能 - 顺序图

![121121221QkAJBM33Ice](assets/121121221QkAJBM33Ice.png)

#### 3.1.4 审核入社申请功能 - 顺序图

![13453453](assets/13453453.png)

#### 3.1.5 创建活动功能 - 顺序图

![21546456gWOYB-RnF6](assets/21546456gWOYB-RnF6.png)

#### 3.1.6 活动报名功能 - 顺序图

![6575675673k](assets/6575675673k.png)

### 3.2 协作图

#### 3.2.1 社团申请审核流程 - 协作图

![3456354MSjQ7HMRPeDpy](assets/3456354MSjQ7HMRPeDpy.png)

#### 3.2.2 活动报名流程 - 协作图

![456456D8qOl](assets/456456D8qOl.png)

#### 3.2.3 权限验证流程 - 协作图

![564564566fw](assets/564564566fw.png)

### 3.3 状态图

#### 3.3.1 社团状态流转 - 状态图

![4564564562](assets/4564564562.png)

#### 3.3.2 入社申请状态流转 - 状态图

![5436546PCVqvUlij9n](assets/5436546PCVqvUlij9n.png)

#### 3.3.3 活动状态流转 - 状态图

![4567567M3L-t5iW1](assets/4567567M3L-t5iW1.png)

#### 3.3.4 活动报名状态流转 - 状态图

![456456tD9tx](assets/456456tD9tx.png)





















